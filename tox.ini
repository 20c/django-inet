
[pytest]
norecursedirs = .facsimile .tox data gen


[tox]
envlist =
    cov-init
    {py27,py33,py34}-django18,
    {py27,py34}-django19,
    {py27,py34}-django110,
    cov-report


[testenv]
passenv = CI TRAVIS*
setenv =
    COVERAGE_FILE=.coverage.tox.{envname}
deps =
    -r{toxinidir}/facsimile/requirements.txt
    -r{toxinidir}/facsimile/requirements-test.txt
    setuptools
    django18: Django==1.8.17
    django19: Django==1.9.12
    django110: Django==1.10.5

commands = py.test --cov={envsitepackagesdir}/django_inet


[testenv:cov-init]
setenv =
    COVERAGE_FILE = .coverage
commands =
    coverage erase


[testenv:cov-report]
setenv =
    COVERAGE_FILE = .coverage
commands =
    coverage combine
    coverage xml
    coverage report --show-missing
    codecov -e TOXENV

